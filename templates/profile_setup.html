<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Setup - NutriTrack</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .setup-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            padding: 40px;
        }
        
        .setup-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .setup-header h1 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e6e9ff;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .setup-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <div class="setup-header">
            <h1>Complete Your Profile</h1>
            <p>Help us personalize your nutrition experience</p>
        </div>
        
        <form id="profileForm">
            <div class="form-group">
                <label>Name</label>
                <input type="text" id="name" placeholder="Your name" required>
            </div>
            
            <div class="form-group">
                <label>Age</label>
                <input type="number" id="age" min="10" max="100" placeholder="Age" required>
            </div>
            
            <div class="form-group">
                <label>Weight (kg)</label>
                <input type="number" id="weight" min="30" max="200" step="0.1" placeholder="Weight in kg" required>
            </div>
            
            <div class="form-group">
                <label>Height (cm)</label>
                <input type="number" id="height" min="100" max="250" placeholder="Height in cm" required>
            </div>
            
            <div class="form-group">
                <label>Gender</label>
                <select id="gender" required>
                    <option value="">Select gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Activity Level</label>
                <select id="activity_level" required>
                    <option value="">Select activity level</option>
                    <option value="sedentary">Sedentary (little or no exercise)</option>
                    <option value="light">Light (1-3 days/week)</option>
                    <option value="moderate">Moderate (3-5 days/week)</option>
                    <option value="active">Active (6-7 days/week)</option>
                    <option value="very_active">Very Active (hard exercise 6-7 days/week)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Goal</label>
                <select id="goal" required>
                    <option value="">Select goal</option>
                    <option value="lose">Lose Weight</option>
                    <option value="maintain">Maintain Weight</option>
                    <option value="gain">Gain Weight</option>
                </select>
            </div>
            
            <button type="button" onclick="submitProfile()" class="setup-btn">Complete Setup</button>
        </form>
    </div>
    
    <script>
        function submitProfile() {
    const profileData = {
        name: document.getElementById('name').value,
        age: document.getElementById('age').value,
        weight: document.getElementById('weight').value,
        height: document.getElementById('height').value,
        gender: document.getElementById('gender').value,
        activity_level: document.getElementById('activity_level').value,
        goal: document.getElementById('goal').value
    };
    
    // Validate all fields are filled
    for (let key in profileData) {
        if (!profileData[key]) {
            alert('Please fill all fields');
            return;
        }
    }
    
    // Send to initial profile API
    fetch('/api/initial_profile', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(profileData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            alert('Error: ' + data.error);
        } else {
            // Success - redirect to dashboard
            window.location.href = '/';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error saving profile');
    });
}
    </script>
</body>
</html>